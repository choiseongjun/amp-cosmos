syntax = "proto3";
package amp.amp.v1;

import "cosmos/base/v1beta1/coin.proto";
import "gogoproto/gogo.proto";

option go_package = "amp/x/amp/types";

// ListingStatus represents the state of a listing
enum ListingStatus {
  LISTING_STATUS_ACTIVE = 0;
  LISTING_STATUS_SOLD = 1;
  LISTING_STATUS_CANCELLED = 2;
}

// Listing represents a marketplace item listed for sale
message Listing {
  uint64 id = 1;
  string seller = 2; // bech32 address
  string title = 3;
  string description = 4;
  cosmos.base.v1beta1.Coin asset = 5 [(gogoproto.nullable) = false]; // what is sold (locked on list)
  cosmos.base.v1beta1.Coin price = 6 [(gogoproto.nullable) = false]; // what buyer pays (total)
  ListingStatus status = 7;
  string buyer = 8; // bech32 address (set when sold)
  int64 created_at = 9; // block time unix seconds
}

// Event emitted when an item is listed
message EventItemListed {
  uint64 id = 1;
  string seller = 2;
  cosmos.base.v1beta1.Coin asset = 3 [(gogoproto.nullable) = false];
  cosmos.base.v1beta1.Coin price = 4 [(gogoproto.nullable) = false];
  int64 created_at = 5;
}

// Event emitted when an item is bought
message EventItemBought {
  uint64 id = 1;
  string seller = 2;
  string buyer = 3;
  cosmos.base.v1beta1.Coin asset = 4 [(gogoproto.nullable) = false];
  cosmos.base.v1beta1.Coin price = 5 [(gogoproto.nullable) = false];
  cosmos.base.v1beta1.Coin fee = 6 [(gogoproto.nullable) = false];
  cosmos.base.v1beta1.Coin seller_amount = 7 [(gogoproto.nullable) = false];
}

// Event emitted when an item is delisted
message EventItemDelisted {
  uint64 id = 1;
  string seller = 2;
}
